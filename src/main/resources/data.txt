# å†…éƒ¨ç±»ç‰›ğŸ‚
**å¯ä»¥å°†ä¸€ä¸ªç±»å®šä¹‰åœ¨ä¸€ä¸ªå¦ä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œè¿™å°±æ˜¯å†…éƒ¨ç±»ã€‚**
å†…éƒ¨ç±»æ˜¯ä¸€ç§éå¸¸æœ‰ç”¨çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ æŠŠä¸€äº›é€»è¾‘ç›¸å…³çš„ç±»ç»„ç»‡åœ¨ä¸€èµ·ï¼Œå¹¶æ§åˆ¶ä½äºå†…éƒ¨çš„ç±»çš„å¯è§†æ€§ã€‚
å†…éƒ¨ç±»å¯ä»¥åˆ†ä¸ºå†…éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»ï¼ˆåˆç§°ä¸ºåµŒå¥—ç±»ï¼‰ã€‚
ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«å¦‚ä¸‹ï¼š
* å†…éƒ¨ç±»ä¸å…¶å¤–å›´ç±»ä¹‹é—´æœ‰è”ç³»ï¼Œå¯ä»¥è®¿é—®å…¶å¤–å›´ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ˆå±æ€§ã€æ–¹æ³•ç­‰ï¼‰ï¼Œå†…éƒ¨ç±»ä¸èƒ½ç‹¬ç«‹äºå¤–å›´ç±»è€Œç‹¬ç«‹å­˜åœ¨ï¼Œå†…éƒ¨ç±»ä¸èƒ½æœ‰ static æ•°æ®å’Œå­—æ®µã€‚
* é™æ€å†…éƒ¨ç±»ä¸å¤–å›´ç±»ä¹‹é—´æ— è”ç³»ï¼Œä¸èƒ½è®¿é—®å¤–å›´ç±»ä¸­éé™æ€çš„å¯¹è±¡ï¼Œé™æ€å†…éƒ¨å¯ä»¥ç‹¬ç«‹äºå¤–å›´ç±»å­˜åœ¨ã€‚

## ä¸ºä»€ä¹ˆå†…éƒ¨ç±»èƒ½è®¿é—®å¤–å›´å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜
å…ˆå†™è¿™æ ·ä¸€æ®µä»£ç ï¼ŒåŠŸèƒ½å¾ˆç®€å•ï¼Œæ­£å‘è®¿é—®æ•°æ®ä¸é€†å‘è®¿é—®æ•°æ®ã€‚
```java

interface Access {
    int access(int index);
}

public class InnerClass {

    public static void main(String[] args) {
        InnerClass innerClass = new InnerClass();
        innerClass.execute();
    }


    public void execute() {
        InnerClass innerClass = new InnerClass();

        Printer.print(innerClass.normalAccess().access(2));
        Printer.print(innerClass.reverseAccess().access(2));


        int d = 100;
        int s = 1000;

        Access res = new Access() {//InnnerClass$1.class

            @Override
            public int access(int index) {
                return d + s;
            }
        };


        Access res2 = new Access() {//InnnerClass$2.class

            @Override
            public int access(int index) {
                checkBound(index);
                return data[index];
            }
        };

        res.access(3);
        Printer.print(res.access(3));
        Printer.print(res2.access(3));
    }

    private int[] data = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

    private void checkBound(int index) {
        if (index < 0 || index >= data.length) {
            throw new ArrayIndexOutOfBoundsException("index = " + index);
        }
    }

    public Access normalAccess() {
        return new NormalAccess();
    }

    public Access reverseAccess() {
        return new ReverseAccess();
    }

    private class NormalAccess implements Access {//InnerClass$NormalAccess.class

        @Override
        public int access(int index) {
            checkBound(index);
            return data[index];
        }
    }

    private class ReverseAccess implements Access {//InnerClass$ReverseAccess.class

        @Override
        public int access(int index) {
            int destIndex = data.length - index - 1;
            checkBound(destIndex);
            return data[destIndex];
        }
    }
}

```
ç¼–è¯‘åç”Ÿæˆå¦‚ä¸‹å‡ ä¸ª*class*æ–‡ä»¶ï¼ŒAccess.classã€InnerClass$1.classã€InnerClass$2.classã€InnerClass$NormalAccess.classã€InnerClass$ReverseAccess.class
ã€InnerClass.class
å…ˆåç¼–è¯‘ InnerClass.classã€InnerClass$ReverseAccess.classã€InnerClass$2.classã€InnerClass$1.class

```
public class club.justwrite.java.book.InnerClass {
  public club.justwrite.java.book.InnerClass();
  public static void main(java.lang.String[]);
  public club.justwrite.java.book.Access normalAccess();
  public club.justwrite.java.book.Access reverseAccess();
  static void access$200(club.justwrite.java.book.InnerClass, int);//checkBound
  static int[] access$300(club.justwrite.java.book.InnerClass);//è·å– data
}

class club.justwrite.java.book.InnerClass$ReverseAccess implements club.justwrite.java.book.Access {
  final club.justwrite.java.book.InnerClass this$0;
  public int access(int index)
  {
    int destIndex = InnerClass.access$300(this.this$0).length - index - 1;
    InnerClass.access$200(this.this$0, destIndex);
    return InnerClass.access$300(this.this$0)[destIndex];
  }
  club.justwrite.java.book.InnerClass$ReverseAccess(club.justwrite.java.book.InnerClass, club.justwrite.java.book.InnerClass$1);
}


class InnerClass$2
  implements Access
{
  InnerClass$2(InnerClass this$0) {}

  public int access(int index)
  {
    InnerClass.access$000(this.this$0, index);
    return InnerClass.access$300(this.this$0)[index];
  }
}

class InnerClass$1
  implements Access
{
  InnerClass$1(InnerClass this$0, int paramInt1, int paramInt2) {}

  public int access(int index)
  {
    return this.val$d + this.val$s;
  }
}

```

å†…éƒ¨ç±»è‡ªåŠ¨æ‹¥æœ‰å¤–å›´ç±»çš„å¼•ç”¨ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ³¨å…¥ã€‚å¤–å›´ç±»å¯¹å†…éƒ¨ç±»éœ€è¦ç”¨åˆ°çš„æ•°æ®æˆ–æ–¹æ³•ç”Ÿæˆç›¸å¯¹åº”çš„ static æ–¹æ³•ã€‚å†…éƒ¨ç±»æŒæœ‰å¤–å›´ç±»çš„å¼•ç”¨ï¼Œè¿™æ­£æ˜¯å®ƒä»¬ä¹‹é—´çš„è”ç³»æ‰€åœ¨ã€‚

å±€éƒ¨å†…éƒ¨ç±»å’Œå†…éƒ¨ç±»å·®ä¸å¤šï¼ŒInnerClass$1 å’Œ InnerClass$2 æ˜¯å±€éƒ¨å†…éƒ¨ç±»ç¼–è¯‘åçš„ç”Ÿæˆã€‚å³ execute() æ–¹æ³•å†…çš„å±€éƒ¨å†…éƒ¨ç±»ã€‚
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨åˆ°å±€éƒ¨å˜é‡è¢«ä»æ„é€ æ–¹æ³•ä¸­æ³¨å…¥ï¼Œçœ‹ InnerClass$1.classã€‚**è¿™é‡Œä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå±€éƒ¨å†…éƒ¨ç±»ï¼Œä½¿ç”¨çš„å±€éƒ¨å˜é‡
å¿…é¡»ä¸ºä¸å¯å˜(final ä¿®é¥°)ï¼Œå› ä¸ºå±€éƒ¨å†…éƒ¨ç±»ä¸­ä¿å­˜çš„åªæ˜¯å±€éƒ¨å˜é‡çš„å‰¯æœ¬ï¼Œå¦‚æœå±€éƒ¨å˜é‡å¯å˜ï¼Œä¼šå¯¼è‡´ä¸å¯é¢„æ–™çš„åæœï¼
è€Œä½¿ç”¨åˆ°æ–¹æ³•çš„å¤–å›´ç±»ä¸­çš„æ•°æ®ï¼Œå’Œæ™®é€šçš„å†…éƒ¨ç±»ä¸€è‡´ã€‚** ä½¿ç”¨çš„å±€éƒ¨å˜é‡è¢«ä»æ„é€ æ–¹æ³•æ³¨å…¥åˆ°å±€éƒ¨å†…éƒ¨ç±»ä¸­ï¼Œæˆ‘è§‰å¾—è¿˜æœ‰
ä¸€ä¸ªåŸå› æ˜¯ï¼Œå±€éƒ¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æœ‰é™åˆ¶çš„ï¼Œæ–¹æ³•æ‰§è¡Œå®Œï¼Œå±€éƒ¨å˜é‡éœ€è¦è¢«å›æ”¶ã€‚



## ä¸ºä»€ä¹ˆéœ€è¦å†…éƒ¨ç±»ï¼Ÿ
æ¯ä¸ªå†…éƒ¨ç±»éƒ½èƒ½ç‹¬ç«‹åœ°ç»§æ‰¿è‡ªä¸€ä¸ªï¼ˆæ¥å£ï¼‰çš„å®ç°ï¼Œæ‰€ä»¥æ— è®ºå¤–å›´ç±»æ˜¯å¦å·²ç»ç»§æ‰¿ç±»æŸä¸ªï¼ˆæ¥å£çš„ï¼‰å®ç°ï¼Œå¯¹å†…éƒ¨ç±»éƒ½æ²¡æœ‰å½±å“ã€‚
å†…éƒ¨ç±»ä½¿å¾—å¤šé‡ç»§æ‰¿çš„è§£å†³æ–¹æ¡ˆå˜å¾—å®Œæ•´ã€‚æ¥å£è§£å†³ç±»éƒ¨åˆ†å¤šé‡ç»§æ‰¿çš„é—®é¢˜ï¼Œè€Œå†…éƒ¨ç±»æœ‰æ•ˆçš„å®ç°äº†"å¤šé‡ç»§æ‰¿"ã€‚å†…éƒ¨ç±»å…è®¸
ç»§æ‰¿å¤šä¸ªéæ¥å£ç±»å‹ã€‚

åœ¨è®¨è®ºè¿™ä¸ªé—®é¢˜æ˜¯å…ˆæ¥æ€è€ƒè¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼ŒArrayList çš„è¿­ä»£å™¨ä¸ºä»€ä¹ˆè¦è®¾è®¡æˆå†…éƒ¨ç±»å½¢å¼ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯ç›´æ¥å®ç° Iterator æ¥å£ï¼Ÿ
è¿™æ˜¯å› ä¸ºå†…éƒ¨ç±»å¯ä»¥ä¿å­˜è‡ªèº«çš„çŠ¶æ€ï¼Œè¿™æ ·ä¸€ä¸ª ArrayList å¯ä»¥åŒæ—¶è¢«å¤šä¸ªä»»åŠ¡éå†ï¼ˆä¾‹å¦‚å¤šçº¿ç¨‹ï¼‰ï¼Œæ¯ä¸ªä»»åŠ¡äº’ä¸å½±å“ã€‚å¦‚æœä¸ä½¿ç”¨
å†…éƒ¨ç±»ï¼Œæ¯æ¬¡æ˜¯èƒ½ä¾›ä¸€ä¸ªä»»åŠ¡éå†ï¼Œè€Œä¸”è¿˜éœ€è¦å¤„ç†æ›´å¤šçš„äº‹åŠ¡ï¼ˆå¦‚éå† cursor çš„é‡åˆ¶ï¼‰ã€‚

æˆ‘å¯¹å†…éƒ¨ç±»çš„ç†è§£æ˜¯ï¼Œå†…éƒ¨ç±»æ˜¯å…¶å¤–å›´ç±»çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒ"ç»§æ‰¿"å¤–å›´ç±»çš„æ‰€æœ‰å±æ€§åŠåŠŸèƒ½å¹¶å¯æ‹“å±•é¢å¤–åŠŸèƒ½ï¼ˆå¯ä»¥å®ç°"å¤šé‡ç»§æ‰¿"çš„åŠŸèƒ½ï¼‰ï¼Œä¸”å†…éƒ¨ç±»å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹
ï¼Œæ¯ä¸ªå®ä¾‹ä¹‹é—´å½¼æ­¤ç‹¬ç«‹ï¼Œå¾ˆå¼ºå¤§ã€‚

ä¸‹é¢æ˜¯æ‘˜è‡ª Thinking In Java å…³äºå†…éƒ¨ç±»çš„ç‰¹æ€§ï¼š
* å†…éƒ¨ç±»å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸å¤–å›´ç±»å¯¹è±¡çš„ä¿¡æ¯ç›¸äº’ç‹¬ç«‹ã€‚
* åœ¨å•ä¸ªå¤–å›´ç±»ä¸­ï¼Œå¯ä»¥è®©å¤šä¸ªå†…éƒ¨ç±»ä»¥ä¸åŒçš„æ–¹å¼å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œæˆ–ç»§æ‰¿åŒä¸€ä¸ªç±»ã€‚
* åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡çš„æ—¶åˆ»å¹¶ä¸ä¾èµ–äºå¤–å›´ç±»å¯¹è±¡çš„åˆ›å»ºã€‚ï¼ˆè¿™é‡Œæ„Ÿè§‰è¡¨è¿°æœ‰ç‚¹é—®é¢˜ï¼Œå†…éƒ¨ç±»å¿…é¡»ä¾é™„äºå¤–å›´ç±»è€Œå­˜åœ¨ï¼‰
* å†…éƒ¨ç±»å¹¶æ²¡æœ‰ä»¤äººè¿·æƒ‘çš„ "is-a"å…³ç³»ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®ä½“ã€‚ï¼ˆä¸ç†è§£ï¼‰




